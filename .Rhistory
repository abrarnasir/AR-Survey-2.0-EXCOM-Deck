setwd("~/Desktop/EXCOM/AR-Survey-2.0-EXCOM-Deck")
library(tidyverse)
library(readxl)
df <- read_excel("agg-data.xlsx", sheet = "Q1_A1")
library(ggplot2)
View(df)
install.packages(RColorBrewer)
install.packages("RColorBrewer")
df <- read_excel("agg-data.xlsx", sheet = "Q1_A1")
df_percentage <- apply(df, 2, function(x){x*100/sum(x,na.rm=T)})
install.packages("reshape2")
library(RColorBrewer)
library(reshape2)
data <- read_excel("agg-data.xlsx", sheet = "Q1_A1")
data_long <- as.data.frame(data)
data_long$subgroup <- rownames(data_long)
data_long <- melt(data_long, id.vars = "subgroup")
data_long
View(data_long)
ggp <- ggplot(data_long, aes(x = variable, y = value, fill = subgroup)) + geom_bar(position = "fill", stat = "identity")
ggp + scale_y_continuous(labels = scales::percent_format())
tail(data_long, -14)
data <- read_excel("agg-data.xlsx", sheet = "Q1_A1")
data_long <- as.data.frame(data)
data_long$subgroup <- rownames(data_long)
data_long <- melt(data_long, id.vars = "subgroup")
tail(data_long, -14)
data_long <- data_long[-(1:14), , drop = FALSE]
View(data_long)
ggp <- ggplot(data_long, aes(x = variable, y = value, fill = subgroup)) + geom_bar(position = "fill", stat = "identity")
ggp + scale_y_continuous(labels = scales::percent_format())
ggp <- ggplot(data_long, aes(x = variable, y = value, fill = subgroup)) + geom_bar(position = "fill", stat = "identity")
ggp
